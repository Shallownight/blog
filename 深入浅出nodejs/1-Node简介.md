# 深入浅出Node.js——Node简介
> 朴灵由浅入深node.js第一章笔记。

## 为什么node使用JavaScript

Node创造者Ryan希望设计高性能的web服务器，这类服务器特点是：**事件驱动**、**非阻塞I/O**。
	
	事件驱动：根据事件启用预先设置的相应动作。
	阻塞I/O：阻塞是指没有获得资源则挂起进程，直到获得资源为止。被挂起的进程进入休眠状态，被调度器的运行队列移走，直到等待条件被满足。
	非阻塞I/O：非阻塞是不能进行设备操作时不挂起，或放弃，或反复查询，直到可以进行操作为止。

### JavaScript优点
	开发门槛（相对C语言来说）更低
	比Lua历史包袱少
	事件驱动应用广泛
	Chrome的JavaScript引擎V8性能高

## Node的特点
- 异步I/O：Ｎode绝大多数操作都是异步的方式进行的
- 事件与回调函数
- 单线程
- 跨平台

### 单线程优点和缺点
优点：不需要在意状态的同步问题，没有死锁，没有线程上下文交换带来的性能上的开销。  
缺点：

	无法利用多核CPU
	错误会引起整个应用退出，健壮性需求高
	大量计算占用CPU导致无法继续调用异步I/O（解决方案：类似于浏览器处理JavaScript单线程问题的web worker，Node使用child_process）

## Node的应用场景
首先弄清楚I/O密集型和CPU密集型的概念：

	I/O密集型：I/O bound 指的是系统的CPU效能相对硬盘/内存的效能要好很多，此时，系统运作，大部分的状况是 CPU 在等 I/O (硬盘/内存) 的读/写，此时 CPU Loading 不高。
	CPU密集型：CPU bound 指的是系统的 硬盘/内存 效能 相对 CPU 的效能 要好很多，此时，系统运作，大部分的状况是 CPU Loading 100%，CPU 要读/写 I/O (硬盘/内存)，I/O在很短的时间就可以完成，而 CPU 还有许多运算要处理，CPU Loading 很高。

**I/O密集型**：I/O操作执行速度远低于CPU执行速度，如果I/O密集型场景用同步、多线程操作，无疑会浪费很多资源。此时Node有很大的优势。  
**CPU密集型**：特点是有大量计算，Node在这上面的性能也不俗。  
**分布式应用**：例如从多个数据库中获取数据。

CPU密集型挑战：由于JS的单线程，当有长时间计算时，CPU的时间片不能释放，后续I/O无法发起。这需要我们把大型运算分解为多个小人物，使得运算能够适时释放，不阻塞I/O的发起。


